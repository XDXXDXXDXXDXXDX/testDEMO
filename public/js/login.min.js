"use strict";var loginURL={"zh-cmn-Hans":"https://www.emtailor.com/b2bviews/backend-sdk/cn/login.html",en:"https://www.emtailor.com/b2bviews/backend-sdk/en/login.html",ja:"https://www.emtailor.com/b2bviews/backend-sdk/jp/login.html"},measureURL={"zh-cmn-Hans":"https://www.emtailor.com/b2bviews/backend-sdk/cn/measure.html",en:"https://www.emtailor.com/b2bviews/backend-sdk/en/measure.html",ja:"https://www.emtailor.com/b2bviews/backend-sdk/jp/measure.html"},tutorialURL={"zh-cmn-Hans":"https://www.emtailor.com/b2bviews/backend-sdk/cn/tutorial.html",en:"https://www.emtailor.com/b2bviews/backend-sdk/en/tutorial.html",ja:"https://www.emtailor.com/b2bviews/backend-sdk/jp/tutorial.html"},accountURL={"zh-cmn-Hans":"https://www.emtailor.com/b2bviews/backend-sdk/cn/account.html",en:"https://www.emtailor.com/b2bviews/backend-sdk/en/account.html",ja:"https://www.emtailor.com/b2bviews/backend-sdk/jp/account.html"},forgetPwURL={"zh-cmn-Hans":"https://www.emtailor.com/b2bviews/backend-sdk/cn/forget-password.html",en:"https://www.emtailor.com/b2bviews/backend-sdk/en/forget-password.html",ja:"https://www.emtailor.com/b2bviews/backend-sdk/jp/forget-password.html"},measureMobileURL={"zh-cmn-Hans":"https://www.emtailor.com/b2bviews/backend-sdk/cn/measure-mobile.html",en:"https://www.emtailor.com/b2bviews/backend-sdk/en/measure-mobile.html",ja:"https://www.emtailor.com/b2bviews/backend-sdk/jp/measure-mobile.html"},userIdTable={"zh-cmn-Hans":"用户 ID",en:"User ID",ja:"名前"},adjustTable={"zh-cmn-Hans":"调整",en:"Adjust",ja:"調整"},viewTable={"zh-cmn-Hans":"展示",en:"View",ja:"表示"},genderTable={"zh-cmn-Hans":["女","男"],en:["Female","Male"],ja:["女性","男性"]},accountFirPwWarning={"zh-cmn-Hans":"密码长度6-16位，至少分别有一个特殊符号、大写字母、小写字母和数字",en:"Password must be 6-16 characters, and including at least one special character, capital letter, lowercase letter, and digit.",ja:"パスワードは6-16文字で、記号、大文字、小文字、数字を含んでいる必要があります"},accountSecPwWarning={"zh-cmn-Hans":"两个密码不一致",en:"Password is different from the first one.",ja:"パスワードが一致しません"},sendText={"zh-cmn-Hans":"Send",en:"Send",ja:"送る"},cApiWarnText={"zh-cmn-Hans":"这不是一个合法的域名",en:"It isn't an authorized domain!",ja:"It isn't an authorized domain!"},SDKAPI={signin:"https://www.emtailor.com/b2b/api/corp/signin",imgsMeasure:"https://www.emtailor.com/b2b/api/measure/imgs",imgsTutorial:"https://www.emtailor.com/b2b/api/tutorial/imgs",getlimit:"https://www.emtailor.com/b2b/api/corp/acsetting/getlimit",add:"https://www.emtailor.com/b2b/api/measure/add",resetpsw:"https://www.emtailor.com/b2b/api/corp/acsetting/resetpsw",sendemail:"https://www.emtailor.com/b2b/api/corp/forgetpsw/sendemail",acSendEmail:"https://www.emtailor.com/b2b/api/corp/acsetting/sendemail",vericode:"https://www.emtailor.com/b2b/api/corp/forgetpsw/vericode",newemail:"https://www.emtailor.com/b2b/api/corp/acsetting/newemail",newpsw:"https://www.emtailor.com/b2b/api/corp/forgetpsw/newpsw",modelling:"https://www.emtailor.com/b2b/api/measure/modelling",listMeasure:"https://www.emtailor.com/b2b/api/measure/list",listTutorial:"https://www.emtailor.com/b2b/api/tutorial/list",updatecorpapi:"https://www.emtailor.com/b2b/api/corp/acsetting/updatecorpapi"};(toz_ajax=function(e){this.settings={}}).prototype={post:function(e){var o=this,n="tozA_"+this.genID(2);if(this.settings[n]=$.extend({url:"",data:"",timeout:12e4,dataType:"JSON",async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",headers:{Authorization:""},crossDomain:!1,beforeSend:new Function("return"),success:new Function("return"),fail:new Function("return"),complete:new Function("return"),closeLoading:!1},e),""===this.settings[n].url&&toz_Toast.init({title:"Wrong",content:"Url can't be empty.",duration:-1,mask:!1,icon:"failure"}),!this.settings[n].closeLoading)var a=toz_Toast.init({title:"Loading",content:"",duration:-1,mask:!0,icon:"loading"});var i=$.ajax({type:"post",url:o.settings[n].url,data:o.settings[n].data,timeout:o.settings[n].timeout,dataType:o.settings[n].dataType,async:o.settings[n].async,crossDomain:o.settings[n].crossDomain,headers:{Authorization:o.settings[n].headers.Authorization},success:function(e){o.settings[n].closeLoading||toz_Toast.hideToast(a),setTimeout(function(){o.settings[n].success(e),delete o.settings[n]},550)},fail:function(e){o.settings[n].closeLoading||toz_Toast.hideToast(a),toz_Toast.init({title:"Wrong",content:e,duration:-1,mask:!1,icon:"failure"}),o.settings[n].fail(e),delete o.settings[n]},complete:function(e,t){"timeout"==t?i.abort():200!=e.status&&(o.settings[n].closeLoading||toz_Toast.hideToast(a),toz_Toast.init({title:"Wrong",content:"Sorry, network connection failed. Please try again.(ErrorCode:"+e.status+")",duration:-1,mask:!1,icon:"failure"}),o.settings[n].complete({XMLHttpRequest:e,status:t}),delete o.settings[n])}})},get:function(){},genID:function(e){return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)}};var toz_ajax=new toz_ajax;function setCookie(e,t,o){var n=new Date;n.setDate(n.getDate()+o),document.cookie=e+"="+t+";expires="+n+";path=/"}function getCookie(e){var t=RegExp(e+"=([^;]+)"),o=document.cookie.match(t);return o?o[1]:""}function delCookie(e){setCookie(e,null,-1)}var cloneObj=function(e){var t,o=e.constructor===Array?[]:{};if("object"==typeof e){if(window.JSON)t=JSON.stringify(e),o=JSON.parse(t);else for(var n in e)o[n]="object"==typeof e[n]?cloneObj(e[n]):e[n];return o}};function isPc(){var e={},t=navigator.platform;return e.win=0==t.indexOf("Win"),e.mac=0==t.indexOf("Mac"),e.x11="X11"==t||0==t.indexOf("Linux"),!!(e.win||e.mac||e.xll)}var theLanguage=$("html").attr("lang"),oUser=document.getElementById("inputEmail"),oPswd=document.getElementById("inputPassword"),oRemember=document.getElementById("remember"),singin=angular.module("signin",[]);function isPc(){var e={},t=navigator.platform;return e.win=0==t.indexOf("Win"),e.mac=0==t.indexOf("Mac"),e.x11="X11"==t||0==t.indexOf("Linux"),!!(e.win||e.mac||e.xll)}singin.controller("signinCtr",["$scope",function(e){getCookie("tozSDK_email")&&getCookie("tozSDK_token")?(e.email=getCookie("tozSDK_email"),e.password="******"):(e.email="",e.password=""),e.applyTrial=function(){if(""!=e.email&&""!=e.password&&null!=e.email&&null!=e.password)if(e.email===getCookie("tozSDK_email")&&getCookie("tozSDK_token"))window.location.href=measureURL[theLanguage];else{var o={username:e.email.toString(),password:e.password.toString(),rememberMe:oRemember.checked?1:0};toz_ajax.post({url:SDKAPI.signin,data:o,success:function(e){if("200"==e.data.code&&""!=e.data.data.accessToken){oRemember.checked?(setCookie("tozSDK_email",o.username,7),setCookie("tozSDK_token",e.data.data.accessToken,7),setCookie("tozSDK_corpName",e.data.data.corpName,7),setCookie("tozSDK_keepTime",168,7)):(setCookie("tozSDK_token",e.data.data.accessToken),setCookie("tozSDK_corpName",e.data.data.corpName),setCookie("tozSDK_keepTime",24));var t=document.documentElement.clientWidth;isPc()||768<t?window.location.href=measureURL[theLanguage]:window.location.href=measureMobileURL[theLanguage]}else toz_Toast.init({title:"Wrong",content:e.data.data,duration:-1,mask:!1,icon:"failure"})}})}else toz_Toast.init({title:"Warning",content:"Email and password can't empty!",duration:-1,mask:!1,icon:"warning"})}}]),window.onload=function(){getCookie("tozSDK_email")&&getCookie("tozSDK_token")&&(oUser.value=getCookie("tozSDK_email"),oPswd.value="******",oRemember.checked=!0),oRemember.onchange=function(){this.checked||(delCookie("tozSDK_email"),delCookie("tozSDK_token"),oPswd.value="")},oPswd.onchange=function(){delCookie("tozSDK_token")},oUser.onchange=function(){delCookie("tozSDK_email"),delCookie("tozSDK_token"),oPswd.value=""},$("#cnLoginUrl").click(function(){window.location.href=loginURL["zh-cmn-Hans"]}),$("#enLoginUrl").click(function(){window.location.href=loginURL.en}),$("#jpLoginUrl").click(function(){window.location.href=loginURL.ja}),$(".register-button").click(function(){toz_Toast.init({title:"Opening soon",content:"",duration:3e3,mask:!1,icon:"warning"})})};