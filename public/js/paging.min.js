var initstate=!0;!function(t,e){"function"==typeof define&&define.amd?define(["$"],e):"object"==typeof exports?module.exports=e():t.Query=e(window.Zepto||window.jQuery||$)}(this,function(c){return{getQuery:function(t,e,a){new RegExp("(^|&|#)"+t+"=([^&]*)(&|$|#)","i");var s,n,r=(a=a||window).location.href,h="";if(""!=(n=1==(s="#"==e?r.split("#"):r.split("?")).length?"":s[1])){gg=n.split(/&|#/);var o=gg.length;for(str=t+"=",i=0;i<o;i++)if(0==gg[i].indexOf(str)){h=gg[i].replace(str,"");break}}return decodeURI(h)},getForm:function(t){var o={},u={};c(t).find("*[name]").each(function(t,a){var e,i=c(a).attr("name"),s=c.trim(c(a).val()),n=[];if(""!=i&&!c(a).hasClass("getvalued")){if("money"==c(a).data("type")&&(s=s.replace(/\,/gi,"")),"radio"==c(a).attr("type")){var r=null;c("input[name='"+i+"']:radio").each(function(){c(this).is(":checked")&&(r=c.trim(c(this).val()))}),s=r||""}if("checkbox"==c(a).attr("type")){r=[];c("input[name='"+i+"']:checkbox").each(function(){c(this).is(":checked")&&r.push(c.trim(c(this).val()))}),s=r.length?r.join(","):""}if(c(a).attr("listvalue")&&(o[c(a).attr("listvalue")]||(o[c(a).attr("listvalue")]=[],c("input[listvalue='"+c(a).attr("listvalue")+"']").each(function(){if(""!=c(this).val()){var t=c(this).attr("name"),e={};if("json"==c(this).data("type")?e[t]=JSON.parse(c(this).val()):e[t]=c.trim(c(this).val()),c(this).attr("paramquest")){var i=JSON.parse(c(this).attr("paramquest"));e=c.extend(e,i)}o[c(a).attr("listvalue")].push(e),c(this).addClass("getvalued")}}))),c(a).attr("arrayvalue")&&(o[c(a).attr("arrayvalue")]||(o[c(a).attr("arrayvalue")]=[],c("input[arrayvalue='"+c(a).attr("arrayvalue")+"']").each(function(){if(""!=c(this).val()){var t={};if(t="json"==c(this).data("type")?JSON.parse(c(this).val()):c.trim(c(this).val()),c(this).attr("paramquest")){var e=JSON.parse(c(this).attr("paramquest"));t=c.extend(t,e)}o[c(a).attr("arrayvalue")].push(t)}}))),""!=i&&!c(a).hasClass("getvalued"))if(i.match(/\./)){if(e=(n=i.split("."))[0],3==n.length)u[n[1]]=u[n[1]]||{},u[n[1]][n[2]]=s;else if("json"==c(a).data("type")){if(u[n[1]]=JSON.parse(s),c(a).attr("paramquest")){var h=JSON.parse(c(a).attr("paramquest"));u[n[1]]=c.extend(u[n[1]],h)}}else u[n[1]]=s;o[e]?o[e]=c.extend({},o[e],u):o[e]=u}else o[i]=s}});var e={};for(var i in o){var a=o[i];e[i]="object"==typeof a?JSON.stringify(a):o[i]}return c(".getvalued").removeClass("getvalued"),e},setHash:function(t){var e="";t=c.extend(this.getHash(),t);var i=[];for(var a in t)""!=t[a]&&i.push(a+"="+encodeURIComponent(t[a]));return e+=i.join("&"),location.hash=e,this},getHash:function(t){if("string"==typeof t)return this.getQuery(t,"#");var e={},i=location.hash;if(0<i.length)for(var a=(i=i.substr(1)).split("&"),s=0,n=a.length;s<n;s++){var r=a[s].split("=");0<r.length&&(e[r[0]]=decodeURI(r[1])||"")}return e}}}),function(t,e){"function"==typeof define&&define.amd?define(["$","query"],e):"object"==typeof exports?module.exports=e():t.Paging=e(window.Zepto||window.jQuery||$,Query)}(this,function(s,e){function n(){var t=Math.random().toString().replace(".","");this.id="Paging_"+t}return s.fn.Paging=function(i){var a=[];return s(this).each(function(){var t=s.extend({target:s(this)},i),e=new n;e.init(t),a.push(e)}),a},n.prototype={init:function(t){this.settings=s.extend({callback:null,pagesize:10,current:1,prevTpl:"Prev",nextTpl:"Next",firstTpl:"首页",lastTpl:"末页",ellipseTpl:"...",toolbar:!1,hash:!0,pageSizeList:[5,10,15,20],goFunction:function(){}},t),this.target=s(this.settings.target),this.container=s('<div id="'+this.id+'" class="ui-paging-container"/>'),this.target.append(this.container),this.render(this.settings),this.format(),this.bindEvent();var e=this;s("#searchButton").click(function(){e.changePagesize(1)})},render:function(t){this.count=t.count||this.settings.count,this.pagesize=t.pagesize||this.settings.pagesize,this.current=t.current||this.settings.current,this.pagecount=Math.ceil(this.count/this.pagesize),this.format()},bindEvent:function(){var e=this;this.container.on("click","li.js-page-action,li.ui-pager",function(t){if(s(this).hasClass("ui-pager-disabled")||s(this).hasClass("focus"))return!1;s(this).hasClass("js-page-action")?(s(this).hasClass("js-page-prev")&&(e.current=Math.max(1,e.current-1)),s(this).hasClass("js-page-next")&&(e.current=Math.min(e.pagecount,e.current+1))):s(this).data("page")&&(e.current=parseInt(s(this).data("page"))),e.go()})},go:function(t){this.current=t||this.current,this.current=Math.max(1,this.current),this.current=Math.min(this.current,this.pagecount),this.format(),this.settings.hash&&e.setHash({page:this.current}),this.settings.goFunction(this.current),this.settings.callback&&this.settings.callback(this.current,this.pagesize,this.pagecount)},changePagesize:function(t){this.render({current:t})},format:function(){var t="<ul>";t+='<li class="js-page-prev js-page-action ui-pager">'+this.settings.prevTpl+"</li>",t+='<li class="js-page-next js-page-action ui-pager">'+this.settings.nextTpl+"</li>",t+="</ul>",this.container.html(t),1===this.current&&s(".js-page-prev",this.container).addClass("ui-pager-disabled"),this.current===this.pagecount&&s(".js-page-next",this.container).addClass("ui-pager-disabled"),this.container.find('li[data-page="'+this.current+'"]').addClass("focus").siblings().removeClass("focus"),this.settings.toolbar&&this.bindToolbar()},bindToolbar:function(){var i=this,t=s('<li class="ui-paging-toolbar"><input type="text" class="ui-paging-count"/><a href="javascript:void(0)">Go</a></li>');s("input",t).val(this.current),s("input",t).click(function(){s(this).select()}).keydown(function(t){if(13==t.keyCode){var e=parseInt(s(this).val())||1;i.go(e)}}),s("a",t).click(function(){var t=parseInt(s(this).prev().val())||1;i.go(t)}),this.container.children("ul").append(t)}},n});